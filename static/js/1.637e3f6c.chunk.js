(this["webpackJsonp@magnit/frontend"]=this["webpackJsonp@magnit/frontend"]||[]).push([[1],{282:function(e,t,n){"use strict";var c=n(117),a=n(8),r=n(270),o=function(e){var t=e.children,n=Object(c.a)(e,["children"]);return Object(a.jsx)(r.a,Object.assign({container:!0,direction:"column",css:{width:"100%",minHeight:"100vh"}},n),t)};o.displayName="SectionLayout",n.d(t,"a",(function(){return o}))},283:function(e,t,n){"use strict";var c=n(8),a=n(270),r=n(115),o=n(254),i=function(e){var t=e.title,n=e.children;return Object(c.jsx)(a.a,{item:!0,css:{height:"var(--section-title-height)",boxShadow:"0 6px 20px rgba(220, 227, 235, 0.3)"}},Object(c.jsx)(r.a,{square:!0,css:{height:"100%",display:"flex",alignItems:"center",boxShadow:"none !important"}},Object(c.jsx)(a.a,{container:!0,css:function(e){return{paddingLeft:e.spacing(4),paddingRight:e.spacing(4)}}},Object(c.jsx)(a.a,{item:!0,xs:!0},Object(c.jsx)(o.a,{variant:"h4",component:"div"},Object(c.jsx)("span",null,t))),n)))};i.displayName="SectionTitle",n.d(t,"a",(function(){return i}))},284:function(e,t,n){"use strict";var c=n(117),a=n(8),r=n(270),o=function(e){var t=e.children,n=Object(c.a)(e,["children"]);return Object(a.jsx)(r.a,Object.assign({item:!0,xs:!0,css:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}},n),t)};o.displayName="CenteredSectionItem",n.d(t,"a",(function(){return o}))},285:function(e,t,n){"use strict";var c=n(270),a=n(254),r=n(8),o=n(284),i=function(e){var t=e.title,n=e.button,i=e.children;return Object(r.jsx)(o.a,null,Object(r.jsx)(c.a,{container:!0,justify:"center",alignContent:"center",direction:"column"},Object(r.jsx)(c.a,{item:!0,css:function(e){return{marginBottom:e.spacing(3)}}},Object(r.jsx)(a.a,{component:"div",align:"center",css:function(e){return{color:e.colors.black,fontWeight:500,fontSize:e.fontSize.xLarge}}},Object(r.jsx)("span",null,t))),Object(r.jsx)(c.a,{item:!0,css:function(e){return{marginBottom:e.spacing(3)}}},Object(r.jsx)(a.a,{component:"div",align:"center",css:function(e){return{color:e.colors.secondary,fontSize:e.colors.larger}}},i)),Object(r.jsx)(c.a,{item:!0},Object(r.jsx)(c.a,{container:!0,justify:"center",alignContent:"center"},Object(r.jsx)(c.a,{item:!0},n)))))};i.displayName="EmptyList",n.d(t,"a",(function(){return i}))},289:function(e,t,n){"use strict";n.r(t);var c=n(118),a=n(25),r=n(8),o=n(227),i=n(49),s=n(229),u=n(279),j=n(270),l=n(254),b=n(115),d=n(30),p=n(285),O=n(282),f=n(283),m=n(73),x=n(28),g=n.n(x),h=n(0),v=n(120),y=[{key:"title",label:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0448\u0430\u0431\u043b\u043e\u043d\u0430",sortable:!0},{key:"description",label:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435",sortable:!0},{key:"createdAt",label:"\u0414\u0430\u0442\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f",sortable:!0},{key:"updatedAt",label:"\u0414\u0430\u0442\u0430 \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f",sortable:!0}],S=function(){var e=Object(h.useContext)(m.a),t=Object(h.useState)(""),n=Object(a.a)(t,2),x=n[0],S=n[1],k=Object(h.useState)(0),C=Object(a.a)(k,2),T=C[0],w=C[1],A=Object(h.useState)([]),I=Object(a.a)(A,2),B=I[0],E=I[1],L=Object(h.useState)(0),D=Object(a.a)(L,2),W=D[0],F=D[1],R=Object(h.useState)("asc"),N=Object(a.a)(R,2),q=N[0],z=N[1],G=Object(h.useState)(""),H=Object(a.a)(G,2),J=H[0],P=H[1],M=Object(h.useState)({redirect:!1,to:""}),U=Object(a.a)(M,2),K=U[0],Q=U[1],V=Object(h.useCallback)((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.title,a=t.sort,r=t.sortBy,o=(a||"ASC").toUpperCase();Object(v.c)(e.courier,n,o,r).then((function(e){E(e.templates.map((function(e){return Object(c.a)({},e,{createdAt:Object(s.getFriendlyDate)(new Date(e.createdAt),!0),updatedAt:Object(s.getFriendlyDate)(new Date(e.updatedAt),!0)})}))),w(e.all)})).catch(console.error)}),[e.courier]);Object(h.useEffect)((function(){F(0),z("asc"),P(""),S(""),V()}),[e.courier,V]);var X=Object(h.useCallback)((function(t){Object(v.b)(e.courier,t).then((function(){V(),e.setSnackbarState({open:!0,message:"\u0428\u0430\u0431\u043b\u043e\u043d \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0443\u0434\u0430\u043b\u0451\u043d"})})).catch((function(){e.setSnackbarError(!0),e.setSnackbarState({open:!0,message:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0448\u0430\u0431\u043b\u043e\u043d"})}))}),[e,V]),Y=Object(h.useCallback)((function(e,t){return[Object(r.jsx)(u.a,{key:e.id,onClick:function(n){n.stopPropagation(),X(e.id),t()}},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c")]}),[X]),Z=g.a.debounce(V,150),$=Object(h.useCallback)((function(e){var t=e.target.value;S(t),Z({title:t,sort:q,sortBy:J})}),[q,J,Z]),_=Object(h.useCallback)((function(e,t){z(e),P(t),V({title:x,sort:e,sortBy:t})}),[V,x]),ee=!T;return Object(r.jsx)(O.a,null,K.redirect&&Object(r.jsx)(d.Redirect,{to:"templates/edit/".concat(K.to),noThrow:!0}),Object(r.jsx)(f.a,{title:"\u0421\u043f\u0438\u0441\u043e\u043a \u0448\u0430\u0431\u043b\u043e\u043d\u043e\u0432"},Object(r.jsx)(j.a,{item:!0,hidden:ee},Object(r.jsx)(o.Button,{component:d.Link,to:"create",variant:"contained",scheme:"blue"},Object(r.jsx)(i.AddIcon,null),Object(r.jsx)(l.a,null,"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0448\u0430\u0431\u043b\u043e\u043d")))),ee&&Object(r.jsx)(p.a,{title:"\u0428\u0430\u0431\u043b\u043e\u043d\u043e\u0432 \u043d\u0435\u0442",button:Object(r.jsx)(o.Button,{component:d.Link,to:"create",scheme:"blue"},Object(r.jsx)(i.AddIcon,null),Object(r.jsx)(l.a,null,"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0448\u0430\u0431\u043b\u043e\u043d"))},Object(r.jsx)("div",null,"\u0414\u043b\u044f \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f \u0448\u0430\u0431\u043b\u043e\u043d\u0430 \u043d\u0430\u0436\u043c\u0438\u0442\u0435 \u043a\u043d\u043e\u043f\u043a\u0443"),Object(r.jsx)("div",null,"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0448\u0430\u0431\u043b\u043e\u043d")),!ee&&Object(r.jsx)(b.a,{square:!0,css:function(e){var t=e.spacing,n=e.boxShadow;return{margin:t(3),boxShadow:n.paper}}},Object(r.jsx)(j.a,{container:!0,direction:"row",css:function(e){return{marginTop:e.spacing(2)}}},Object(r.jsx)(j.a,{container:!0,direction:"column",css:function(e){return{padding:e.spacing(3)}}},Object(r.jsx)(j.a,{container:!0,direction:"row",spacing:2},Object(r.jsx)(j.a,{item:!0,xs:!0,css:function(e){return{padding:"0 ".concat(e.spacing(6)," !important")}}},Object(r.jsx)(o.InputField,{value:x,placeholder:"\u041f\u043e\u0438\u0441\u043a ...",fullWidth:!0,onChange:$,css:function(e){var t=e.colors,n=e.radius,c=e.spacing;return{borderRadius:n(5),background:t.white,border:"1px solid ".concat(t.lightGray),transition:"border 0.25s ease-in-out",cursor:"pointer",":hover, :active":{border:"1px solid ".concat(t.primary)},div:{":before, :after":{border:"none !important"}},input:{padding:"".concat(c(2)," ").concat(c(4))}}}}))),Object(r.jsx)(j.a,{item:!0,css:function(e){return{padding:e.spacing(3)}}},Object(r.jsx)(o.Table,{page:W,order:q,orderBy:J,onRequestSort:_,columns:y,renderMenuItems:Y,data:B,onRowClick:function(e){e&&Q({redirect:!0,to:e.id})},onChangePage:function(e){F(e)}}))))))},k=n(9),C=n.n(k),T=n(228),w=n(71),A=n(121),I=n(123),B=function(){var e=Object(h.useContext)(m.a),t=Object(h.useState)({id:0,sections:[],title:"",description:"",type:T.ETemplateType.LIGHT}),n=Object(a.a)(t,2),s=n[0],u=n[1],b=Object(h.useState)(!1),d=Object(a.a)(b,2),p=d[0],x=d[1],g=Object(h.useState)({open:!1,message:""}),y=Object(a.a)(g,2),S=y[0],k=y[1];return Object(r.jsx)(O.a,null,Object(r.jsx)(f.a,{title:"\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0448\u0430\u0431\u043b\u043e\u043d\u0430"},Object(r.jsx)(j.a,{item:!0},Object(r.jsx)(o.Button,{variant:"contained",scheme:"green",onClick:function(){Object(v.a)(e.courier,s).then((function(){return k({open:!0,message:"\u0428\u0430\u0431\u043b\u043e\u043d \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0441\u043e\u0445\u0440\u0430\u043d\u0451\u043d!"})})).catch((function(){k({open:!0,message:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f \u0448\u0430\u0431\u043b\u043e\u043d\u0430!"}),x(!0)}))},disabled:S.open},Object(r.jsx)(i.CheckIcon,null),Object(r.jsx)(l.a,null,"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c")))),Object(r.jsx)(j.a,{css:function(e){return{maxWidth:e.maxTemplateWidth,margin:e.spacing(4),position:"relative",opacity:S.open?.5:1,transition:"opacity 0.3s ease-in-out",pointerEvents:S.open?"none":"initial"}}},Object(r.jsx)(w.TemplateEditor,{template:s,css:function(e){return{background:e.colors.main}},onChange:function(e){u(Object(c.a)({},e))},onAddAsset:function(t){return C.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Object(I.b)(e.courier,t).then((function(e){return Object(c.a)({},e,{filename:"".concat("http://91.144.161.208:1336","/").concat(e.filename)})})));case 1:case"end":return n.stop()}}))},onDeleteAsset:function(t){return C.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Object(I.a)(e.courier,t));case 1:case"end":return n.stop()}}))}})),Object(r.jsx)(A.a,{open:S.open,error:p,onClose:function(e,t){"clickaway"!==t&&(k({open:!1,message:""}),setTimeout((function(){return x(!1)}),100))},message:S.message}))},E=n(36),L=function(e){var t=e.templateId,n=Object(h.useContext)(m.a),s=Object(h.useState)({id:0,sections:[],title:"",description:"",type:T.ETemplateType.LIGHT}),u=Object(a.a)(s,2),b=u[0],d=u[1],p=Object(h.useState)(!1),x=Object(a.a)(p,2),g=x[0],v=x[1],y=Object(h.useState)({open:!1,message:""}),S=Object(a.a)(y,2),k=S[0],I=S[1];return Object(h.useEffect)((function(){Object(E.getTemplate)(n.courier,t).then((function(e){return d(e.template)})).catch(console.error)}),[n.courier,t]),Object(r.jsx)(O.a,null,Object(r.jsx)(f.a,{title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0448\u0430\u0431\u043b\u043e\u043d\u0430"},Object(r.jsx)(j.a,{item:!0},Object(r.jsx)(o.Button,{variant:"contained",scheme:"blue",onClick:function(){Object(E.updateTemplate)(n.courier,t,b).then((function(){return I({open:!0,message:"\u0428\u0430\u0431\u043b\u043e\u043d \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043e\u0431\u043d\u043e\u0432\u043b\u0451\u043d!"})})).catch((function(){I({open:!0,message:"\u041e\u0448\u0438\u0431\u043a\u0430 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f \u0448\u0430\u0431\u043b\u043e\u043d\u0430!"}),v(!0)}))},disabled:k.open},Object(r.jsx)(i.CheckIcon,null),Object(r.jsx)(l.a,null,"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c")))),Object(r.jsx)(j.a,{css:function(e){return{maxWidth:e.maxTemplateWidth,margin:e.spacing(4),position:"relative",transition:"opacity 0.3s ease-in-out"}}},Object(r.jsx)(w.TemplateEditor,{template:b,css:function(e){return{background:e.colors.main}},onChange:function(e){d(Object(c.a)({},e))},onAddAsset:function(e){return C.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(E.uploadFile)(n.courier,e).then((function(e){return Object(c.a)({},e,{filename:"".concat("http://91.144.161.208:1336","/").concat(e.filename)})})));case 1:case"end":return t.stop()}}))},onDeleteAsset:function(e){return C.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(E.deleteFile)(n.courier,e));case 1:case"end":return t.stop()}}))}})),Object(r.jsx)(A.a,{open:k.open,error:g,onClose:function(e,t){"clickaway"!==t&&(I({open:!1,message:""}),setTimeout((function(){return v(!1)}),100))},message:k.message}))};n.d(t,"TemplateList",(function(){return S})),n.d(t,"CreateTemplate",(function(){return B})),n.d(t,"EditTemplate",(function(){return L}))}}]);
//# sourceMappingURL=1.637e3f6c.chunk.js.map