(this["webpackJsonp@magnit/frontend"]=this["webpackJsonp@magnit/frontend"]||[]).push([[2],{289:function(e,t,n){"use strict";var c=n(90),r=n(9),a=n(277),o=function(e){var t=e.children,n=Object(c.a)(e,["children"]);return Object(r.jsx)(a.a,Object.assign({container:!0,direction:"column",css:{width:"100%",minHeight:"100vh"}},n),t)};o.displayName="SectionLayout",n.d(t,"a",function(){return o})},290:function(e,t,n){"use strict";var c=n(9),r=n(277),a=n(88),o=n(188),i=function(e){var t=e.title,n=e.children;return Object(c.jsx)(r.a,{item:!0,css:{height:"var(--section-title-height)",boxShadow:"0 6px 20px rgba(220, 227, 235, 0.3)"}},Object(c.jsx)(a.a,{square:!0,css:{height:"100%",display:"flex",alignItems:"center",boxShadow:"none !important"}},Object(c.jsx)(r.a,{container:!0,css:function(e){return{paddingLeft:e.spacing(4),paddingRight:e.spacing(4)}}},Object(c.jsx)(r.a,{item:!0,xs:!0},Object(c.jsx)(o.a,{variant:"h4",component:"div"},Object(c.jsx)("span",null,t))),n)))};i.displayName="SectionTitle",n.d(t,"a",function(){return i})},291:function(e,t,n){"use strict";var c=n(90),r=n(9),a=n(277),o=function(e){var t=e.children,n=Object(c.a)(e,["children"]);return Object(r.jsx)(a.a,Object.assign({item:!0,xs:!0,css:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}},n),t)};o.displayName="CenteredSectionItem",n.d(t,"a",function(){return o})},292:function(e,t,n){"use strict";var c=n(277),r=n(188),a=n(9),o=n(291),i=function(e){var t=e.title,n=e.button,i=e.children;return Object(a.jsx)(o.a,null,Object(a.jsx)(c.a,{container:!0,justify:"center",alignContent:"center",direction:"column"},Object(a.jsx)(c.a,{item:!0,css:function(e){return{marginBottom:e.spacing(3)}}},Object(a.jsx)(r.a,{component:"div",align:"center",css:function(e){return{color:e.colors.black,fontWeight:500,fontSize:e.fontSize.xLarge}}},Object(a.jsx)("span",null,t))),Object(a.jsx)(c.a,{item:!0,css:function(e){return{marginBottom:e.spacing(3)}}},Object(a.jsx)(r.a,{component:"div",align:"center",css:function(e){return{color:e.colors.secondary,fontSize:e.colors.larger}}},i)),Object(a.jsx)(c.a,{item:!0},Object(a.jsx)(c.a,{container:!0,justify:"center",alignContent:"center"},Object(a.jsx)(c.a,{item:!0},n)))))};i.displayName="EmptyList",n.d(t,"a",function(){return i})},302:function(e,t,n){"use strict";n.r(t);var c=n(91),r=n(25),a=n(9),o=n(136),i=n(47),s=n(138),u=n(286),j=n(277),l=n(188),b=n(88),p=n(27),O=n(292),f=n(289),d=n(290),m=n(65),g=n(28),h=n.n(g),x=n(0),y=n(93);function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);t&&(c=c.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,c)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(n,!0).forEach(function(t){Object(c.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var k=[{key:"title",label:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0448\u0430\u0431\u043b\u043e\u043d\u0430",sortable:!0},{key:"description",label:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435",sortable:!0},{key:"createdAt",label:"\u0414\u0430\u0442\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f",sortable:!0},{key:"updatedAt",label:"\u0414\u0430\u0442\u0430 \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f",sortable:!0}],S=function(){var e=Object(x.useContext)(m.a),t=Object(x.useState)(""),n=Object(r.a)(t,2),c=n[0],g=n[1],v=Object(x.useState)(0),S=Object(r.a)(v,2),C=S[0],P=S[1],T=Object(x.useState)([]),D=Object(r.a)(T,2),E=D[0],A=D[1],I=Object(x.useState)(0),B=Object(r.a)(I,2),L=B[0],W=B[1],F=Object(x.useState)("asc"),R=Object(r.a)(F,2),N=R[0],q=R[1],z=Object(x.useState)(""),G=Object(r.a)(z,2),H=G[0],J=G[1],M=Object(x.useState)({redirect:!1,to:""}),U=Object(r.a)(M,2),K=U[0],Q=U[1],V=Object(x.useCallback)(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.title,c=t.sort,r=t.sortBy,a=(c||"ASC").toUpperCase();Object(y.c)(e.courier,n,a,r).then(function(e){A(e.templates.map(function(e){return w({},e,{createdAt:Object(s.getFriendlyDate)(new Date(e.createdAt),!0),updatedAt:Object(s.getFriendlyDate)(new Date(e.updatedAt),!0)})})),P(e.all)}).catch(console.error)},[e.courier]);Object(x.useEffect)(function(){W(0),q("asc"),J(""),g(""),V()},[e.courier,V]);var X=Object(x.useCallback)(function(t){Object(y.b)(e.courier,t).then(function(){V(),e.setSnackbarState({open:!0,message:"\u0428\u0430\u0431\u043b\u043e\u043d \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0443\u0434\u0430\u043b\u0451\u043d"})}).catch(function(){e.setSnackbarError(!0),e.setSnackbarState({open:!0,message:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0448\u0430\u0431\u043b\u043e\u043d"})})},[e,V]),Y=Object(x.useCallback)(function(e,t){return[Object(a.jsx)(u.a,{key:e.id,onClick:function(n){n.stopPropagation(),X(e.id),t()}},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c")]},[X]),Z=h.a.debounce(V,150),$=Object(x.useCallback)(function(e){var t=e.target.value;g(t),Z({title:t,sort:N,sortBy:H})},[N,H,Z]),_=Object(x.useCallback)(function(e,t){q(e),J(t),V({title:c,sort:e,sortBy:t})},[V,c]),ee=!C;return Object(a.jsx)(f.a,null,K.redirect&&Object(a.jsx)(p.Redirect,{to:"templates/edit/".concat(K.to),noThrow:!0}),Object(a.jsx)(d.a,{title:"\u0421\u043f\u0438\u0441\u043e\u043a \u0448\u0430\u0431\u043b\u043e\u043d\u043e\u0432"},Object(a.jsx)(j.a,{item:!0,hidden:ee},Object(a.jsx)(o.Button,{component:p.Link,to:"create",variant:"contained",scheme:"blue"},Object(a.jsx)(i.AddIcon,null),Object(a.jsx)(l.a,null,"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0448\u0430\u0431\u043b\u043e\u043d")))),ee&&Object(a.jsx)(O.a,{title:"\u0428\u0430\u0431\u043b\u043e\u043d\u043e\u0432 \u043d\u0435\u0442",button:Object(a.jsx)(o.Button,{component:p.Link,to:"create",scheme:"blue"},Object(a.jsx)(i.AddIcon,null),Object(a.jsx)(l.a,null,"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0448\u0430\u0431\u043b\u043e\u043d"))},Object(a.jsx)("div",null,"\u0414\u043b\u044f \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f \u0448\u0430\u0431\u043b\u043e\u043d\u0430 \u043d\u0430\u0436\u043c\u0438\u0442\u0435 \u043a\u043d\u043e\u043f\u043a\u0443"),Object(a.jsx)("div",null,"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0448\u0430\u0431\u043b\u043e\u043d")),!ee&&Object(a.jsx)(b.a,{square:!0,css:function(e){var t=e.spacing,n=e.boxShadow;return{margin:t(3),boxShadow:n.paper}}},Object(a.jsx)(j.a,{container:!0,direction:"row",css:function(e){return{marginTop:e.spacing(2)}}},Object(a.jsx)(j.a,{container:!0,direction:"column",css:function(e){return{padding:e.spacing(3)}}},Object(a.jsx)(j.a,{container:!0,direction:"row",spacing:2},Object(a.jsx)(j.a,{item:!0,xs:!0,css:function(e){return{padding:"0 ".concat(e.spacing(6)," !important")}}},Object(a.jsx)(o.InputField,{value:c,placeholder:"\u041f\u043e\u0438\u0441\u043a ...",fullWidth:!0,onChange:$,css:function(e){var t=e.colors,n=e.radius,c=e.spacing;return{borderRadius:n(5),background:t.white,border:"1px solid ".concat(t.lightGray),transition:"border 0.25s ease-in-out",cursor:"pointer",":hover, :active":{border:"1px solid ".concat(t.primary)},div:{":before, :after":{border:"none !important"}},input:{padding:"".concat(c(2)," ").concat(c(4))}}}}))),Object(a.jsx)(j.a,{item:!0,css:function(e){return{padding:e.spacing(3)}}},Object(a.jsx)(o.Table,{page:L,order:N,orderBy:H,onRequestSort:_,columns:k,renderMenuItems:Y,data:E,onRowClick:function(e){e&&Q({redirect:!0,to:e.id})},onChangePage:function(e){W(e)}}))))))},C=n(7),P=n.n(C),T=n(11),D=n(137),E=n(64),A=n(94),I=n(96);function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);t&&(c=c.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,c)}return n}function L(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(n,!0).forEach(function(t){Object(c.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var W=function(){var e=Object(x.useContext)(m.a),t=Object(x.useState)({id:0,sections:[],title:"",description:"",type:D.ETemplateType.LIGHT}),n=Object(r.a)(t,2),c=n[0],s=n[1],u=Object(x.useState)(!1),b=Object(r.a)(u,2),p=b[0],O=b[1],g=Object(x.useState)({open:!1,message:""}),h=Object(r.a)(g,2),v=h[0],w=h[1];function k(){return(k=Object(T.a)(P.a.mark(function t(n){return P.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(I.b)(e.courier,n).then(function(e){return L({},e,{filename:"".concat("http://localhost:1337","/").concat(e.filename)})}));case 1:case"end":return t.stop()}},t)}))).apply(this,arguments)}function S(){return(S=Object(T.a)(P.a.mark(function t(n){return P.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(I.a)(e.courier,n));case 1:case"end":return t.stop()}},t)}))).apply(this,arguments)}return Object(a.jsx)(f.a,null,Object(a.jsx)(d.a,{title:"\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0448\u0430\u0431\u043b\u043e\u043d\u0430"},Object(a.jsx)(j.a,{item:!0},Object(a.jsx)(o.Button,{variant:"contained",scheme:"green",onClick:function(){Object(y.a)(e.courier,c).then(function(){return w({open:!0,message:"\u0428\u0430\u0431\u043b\u043e\u043d \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0441\u043e\u0445\u0440\u0430\u043d\u0451\u043d!"})}).catch(function(){w({open:!0,message:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f \u0448\u0430\u0431\u043b\u043e\u043d\u0430!"}),O(!0)})},disabled:v.open},Object(a.jsx)(i.CheckIcon,null),Object(a.jsx)(l.a,null,"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c")))),Object(a.jsx)(j.a,{css:function(e){return{maxWidth:e.maxTemplateWidth,margin:e.spacing(4),position:"relative",opacity:v.open?.5:1,transition:"opacity 0.3s ease-in-out",pointerEvents:v.open?"none":"initial"}}},Object(a.jsx)(E.TemplateEditor,{template:c,css:function(e){return{background:e.colors.main}},onChange:function(e){s(L({},e))},onAddAsset:function(e){return k.apply(this,arguments)},onDeleteAsset:function(e){return S.apply(this,arguments)}})),Object(a.jsx)(A.a,{open:v.open,error:p,onClose:function(e,t){"clickaway"!==t&&(w({open:!1,message:""}),setTimeout(function(){return O(!1)},100))},message:v.message}))},F=n(31);function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);t&&(c=c.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,c)}return n}function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(n,!0).forEach(function(t){Object(c.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var q=function(e){var t=e.templateId,n=Object(x.useContext)(m.a),c=Object(x.useState)({id:0,sections:[],title:"",description:"",type:D.ETemplateType.LIGHT}),s=Object(r.a)(c,2),u=s[0],b=s[1],p=Object(x.useState)(!1),O=Object(r.a)(p,2),g=O[0],h=O[1],y=Object(x.useState)({open:!1,message:""}),v=Object(r.a)(y,2),w=v[0],k=v[1];function S(){return(S=Object(T.a)(P.a.mark(function e(t){return P.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(F.uploadFile)(n.courier,t).then(function(e){return N({},e,{filename:"".concat("http://localhost:1337","/").concat(e.filename)})}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function C(){return(C=Object(T.a)(P.a.mark(function e(t){return P.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(F.deleteFile)(n.courier,t));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}return Object(x.useEffect)(function(){Object(F.getTemplate)(n.courier,t).then(function(e){return b(e.template)}).catch(console.error)},[n.courier,t]),Object(a.jsx)(f.a,null,Object(a.jsx)(d.a,{title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0448\u0430\u0431\u043b\u043e\u043d\u0430"},Object(a.jsx)(j.a,{item:!0},Object(a.jsx)(o.Button,{variant:"contained",scheme:"blue",onClick:function(){Object(F.updateTemplate)(n.courier,t,u).then(function(){return k({open:!0,message:"\u0428\u0430\u0431\u043b\u043e\u043d \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043e\u0431\u043d\u043e\u0432\u043b\u0451\u043d!"})}).catch(function(){k({open:!0,message:"\u041e\u0448\u0438\u0431\u043a\u0430 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f \u0448\u0430\u0431\u043b\u043e\u043d\u0430!"}),h(!0)})},disabled:w.open},Object(a.jsx)(i.CheckIcon,null),Object(a.jsx)(l.a,null,"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c")))),Object(a.jsx)(j.a,{css:function(e){return{maxWidth:e.maxTemplateWidth,margin:e.spacing(4),position:"relative",transition:"opacity 0.3s ease-in-out"}}},Object(a.jsx)(E.TemplateEditor,{template:u,css:function(e){return{background:e.colors.main}},onChange:function(e){b(N({},e))},onAddAsset:function(e){return S.apply(this,arguments)},onDeleteAsset:function(e){return C.apply(this,arguments)}})),Object(a.jsx)(A.a,{open:w.open,error:g,onClose:function(e,t){"clickaway"!==t&&(k({open:!1,message:""}),setTimeout(function(){return h(!1)},100))},message:w.message}))};n.d(t,"TemplateList",function(){return S}),n.d(t,"CreateTemplate",function(){return W}),n.d(t,"EditTemplate",function(){return q})}}]);
//# sourceMappingURL=2.d89aea1a.chunk.js.map